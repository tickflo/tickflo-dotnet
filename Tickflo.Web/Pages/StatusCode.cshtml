@page
@model StatusCodeModel
@{
    ViewData["Title"] = "Error";
}

<style>
    @@keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .card {
        animation: slideIn 0.4s ease-out;
    }
</style>

<div class="flex">
    @await Html.PartialAsync("_AppSidebar")
    <section class="p-6 flex-1">
        <div class="w-full max-w-4xl">
            <!-- Status Code Header -->
            <div class="card bg-gradient-to-br from-error/10 to-error/5 border border-error/20 shadow-sm rounded-3xl overflow-hidden">
                <div class="card-body">
                    <div class="flex items-start gap-6">
                        <div class="text-6xl font-bold text-error opacity-20">
                            @Model.HttpStatusCode
                        </div>
                        <div class="flex-1">
                            <h1 class="card-title text-2xl mb-2">@Model.StatusMessage</h1>
                            <p class="text-base-content/70">
                                @Model.StatusDescription
                            </p>
                        </div>
                    </div>

                    <!-- Request ID - Always visible -->
                    @if (!string.IsNullOrEmpty(Model.TraceId))
                    {
                        <div class="mt-4 pt-4 border-t border-base-content/10">
                            <div class="flex items-center gap-2">
                                <span class="text-sm font-semibold text-base-content/70">Reference ID:</span>
                                <code class="badge badge-primary bg-primary/20 text-primary border-0 font-mono text-xs">@Model.TraceId</code>
                                <button class="btn btn-xs btn-ghost" onclick="navigator.clipboard.writeText('@Model.TraceId').then(() => alert('Copied!'))">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- Help Section -->
            <div class="card bg-base-100 shadow-sm rounded-3xl mt-6">
                <div class="card-body">
                    <h2 class="card-title text-lg">What can you do?</h2>
                    @if (Model.HttpStatusCode == 404)
                    {
                        <ul class="list-disc list-inside space-y-2 text-base-content/70 mt-3">
                            <li>Check the URL and make sure it's correct</li>
                            <li>Go back to the previous page</li>
                            <li>Return to the home page</li>
                            <li>Check the sidebar navigation for available sections</li>
                        </ul>
                    }
                    else if (Model.HttpStatusCode == 403)
                    {
                        <ul class="list-disc list-inside space-y-2 text-base-content/70 mt-3">
                            <li>You don't have permission to access this resource</li>
                            <li>Contact an administrator if you believe this is a mistake</li>
                            <li>Return to the home page</li>
                        </ul>
                    }
                    else
                    {
                        <ul class="list-disc list-inside space-y-2 text-base-content/70 mt-3">
                            <li>Check your internet connection</li>
                            <li>Try refreshing the page</li>
                            <li>Clear your browser cache</li>
                            <li>Come back in a few moments to try again</li>
                        </ul>
                    }
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 mt-6">
                <a class="btn btn-primary rounded-full" href="/">
                    <i class="fas fa-home"></i>
                    Back to Home
                </a>
                <button class="btn btn-outline rounded-full" onclick="history.back()">
                    <i class="fas fa-arrow-left"></i>
                    Go Back
                </button>
            </div>
        </div>
    </section>
</div>
